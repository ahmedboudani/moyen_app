{% extends "base.html" %}
{% block title %}Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ØªÙ„Ø§Ù…ÙŠØ°{% endblock %}
{% block content %}

<div class="container">
  <h2>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ØªÙ„Ø§Ù…ÙŠØ°</h2>
  <div class="general1">
    <p>ğŸ“Œ Ù…Ø¯ÙŠØ±ÙŠØ© Ø§Ù„ØªØ±Ø¨ÙŠØ© Ù„ÙˆÙ„Ø§ÙŠØ©: {{ general_info.directorate if general_info else '' }}</p>
    <p>ğŸ« Ø§Ù„Ù…Ø¤Ø³Ø³Ø©: {{ general_info.institution if general_info else '' }}</p>
  </div>
  <div class="general2">
    <p>ğŸ‘¨â€ğŸ« Ø§Ù„Ø£Ø³ØªØ§Ø°: {{ general_info.teacher if general_info else '' }}</p>
    <p>ğŸ“š Ø§Ù„Ù…Ø§Ø¯Ø©: {{ general_info.subject if general_info else '' }}</p>
  </div>
  <hr>
<center>
  <form class="add-student" method="POST">
    <div style="padding-top: 5px;width: 90%;display: contents;justify-content: center;">
      <h4 style="width:30%;text-align: left;" >Ø¥Ø¶Ø§ÙØ© ØªÙ„Ù…ÙŠØ°:</h4>
     <input style="width: 50%; margin-top: 10px;" type="text" name="fullname" placeholder="Ø§Ù„Ø¥Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„" required>
    <select style="width: 20%;margin-top: 10px;" name="class_id" required>
      {% for c in classes %}
        <option value="{{ c.id }}">{{ c.name }}</option>
      {% endfor %}
    </select>
    </div>
    

    <button style="width: 50%;font-weight: bold;font-size:medium;height: 40px; " type="submit">â• Ø¥Ø¶Ø§ÙØ©</button>
  </form> 

  <hr>
</center>
  <!-- Ù†Ù…ÙˆØ°Ø¬ Ø¥Ø¶Ø§ÙØ© ØªÙ„Ù…ÙŠØ° ÙŠØ¯ÙˆÙŠ -->


  <!-- âœ… Ù‚Ø³Ù… Ø§Ù„Ø§Ø³ØªÙŠØ±Ø§Ø¯ ÙˆØ§Ù„ØªØµØ¯ÙŠØ± Ù…Ù† Ø¥ÙƒØ³Ù„ -->
<div style="margin: 20px 0; text-align: center;">
  <h3>ğŸ“‚ Ø§Ø³ØªÙŠØ±Ø§Ø¯/ØªØµØ¯ÙŠØ± Ø§Ù„ØªÙ„Ø§Ù…ÙŠØ°</h3>

  <!-- Ø§Ø³ØªÙŠØ±Ø§Ø¯ -->
 <form action="{{ url_for('import_excel') }}" method="post" enctype="multipart/form-data" style="display:inline-block; margin-right:10px; border: 1px solid #ccc; padding: 15px; border-radius: 8px;">
    <h4>ğŸ“¥ Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ù…Ù† Excel</h4>
    <input type="file" name="file" accept=".xlsx,.xls" required>
    <div style="margin-top:10px;">
      <label for="sheet_name">Ø§Ø®ØªØ± Ø§Ù„ØµÙØ­Ø©:</label>
      <select name="sheet_name" id="sheet_name">
          <option value="Sheet1">Ø§Ù„ØµÙØ­Ø© 1</option>
          <option value="Sheet2">Ø§Ù„ØµÙØ­Ø© 2</option>
          <option value="Sheet3">Ø§Ù„ØµÙØ­Ø© 3</option>
      </select>
    </div>
    <div style="margin-top:10px;">
      <label for="start_row">Ø¨Ø¯Ø¡ Ø§Ù„Ù‚Ø±Ø§Ø¡Ø© Ù…Ù† Ø§Ù„Ø³Ø·Ø±:</label>
      <input type="number" name="start_row" id="start_row" value="9" min="1" style="width: 60px;">
    </div>
    <div style="margin-top:10px;">
      <label for="class_id">Ø§Ø®ØªØ± Ø§Ù„Ù‚Ø³Ù…:</label>
      <select name="class_id" id="class_id">
          {% for c in classes %}
              <option value="{{ c.id }}">{{ c.name }}</option>
          {% endfor %}
      </select>
    </div>
    <button type="submit" style="margin-top:10px;">ğŸ“¥ Ø§Ø³ØªÙŠØ±Ø§Ø¯</button>
</form>


</div>

  <hr>

  <!-- Ù‚Ø³Ù… Ø§Ù„ÙÙ„ØªØ±Ø© Ø­Ø³Ø¨ Ø§Ù„ÙØµÙ„ -->
  <div class="filter-section" style="margin-bottom: 20px; text-align: center;display:flex;justify-content: center;align-items: center;">
    <label for="semester-filter" style="font-weight: bold; margin-left: 10px;">Ø¹Ø±Ø¶ Ø§Ù„ØªÙ„Ø§Ù…ÙŠØ° Ù„Ù„ÙØµÙ„:</label>
    <select style="width: 20%;border-color: #25303b ;" id="semester-filter" onchange="window.location.href = '{{ url_for('students') }}?semester=' + this.value" style="padding: 8px; border-radius: 5px; border: 1px solid #ccc;">
      {% for semester_name in semesters %}
      <option value="{{ semester_name }}" {% if semester_name == current_semester %}selected{% endif %}>
        {{ semester_name }}
      </option>
      {% endfor %}
    </select>
  </div>

  <!-- Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ÙØµÙ„ Ø§Ù„Ø­Ø§Ù„ÙŠ -->
  <h3 style="text-align: right;margin-right: 40px; color: #34495e;">Ù‚Ø§Ø¦Ù…Ø© ØªÙ„Ø§Ù…ÙŠØ°: {{ current_semester }}</h3>

  <!-- Ø¬Ø¯ÙˆÙ„ Ø§Ù„ØªÙ„Ø§Ù…ÙŠØ° -->
  <center>
  <div class="tbl">
    <table border="1" cellpadding="8" >
      <tr>
        <th> Ø§Ù„Ø¥Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„</th>
        <th>Ø§Ù„Ù‚Ø³Ù…</th>
        <th>Ø§Ù„Ø¹Ù„Ø§Ù…Ø§Øª</th>
        <th>Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
      </tr>
     
      {% for s in students|sort(attribute='fullname') %}
      <tr>
        <td>{{ s.fullname }}</td>
        <td>{{ s.class_rel.name }}</td>
        <td>
          <a class="add" href="{{ url_for('grades', student_id=s.id) }}">â• Ø¥Ø¶Ø§ÙØ© Ø¹Ù„Ø§Ù…Ø§Øª</a>
        </td>
        <td>
          <a class="edit" href="{{ url_for('edit_student', student_id=s.id) }}">âœï¸ ØªØ¹Ø¯ÙŠÙ„</a>
          <a class="delete" href="{{ url_for('delete_student', id=s.id) }}"
          onclick="return confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„ØªÙ„Ù…ÙŠØ°ØŸ')">âŒ Ø­Ø°Ù</a>

        </td>
      </tr>
      {% endfor %}
    </table>
  </div>
  </center>
</div>
<style>
  .container {
  width: 98%;
  background-color:#d8d8e2;
  padding:10px;
  border-radius: 10px;
  box-shadow: 0px 4px 12px ;
  text-align: center;
  margin: auto;
  margin-top: 0px;
}
.table-container{
  width: 70%;
  display: flex;
  justify-content: center;  /* ÙŠÙˆØ³Ø· Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø£ÙÙ‚ÙŠÙ‹Ø§ */
  align-items: center;      /* ÙŠÙˆØ³Ø· Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø¹Ù…ÙˆØ¯ÙŠÙ‹Ø§ (Ø¥Ø°Ø§ ÙÙŠÙ‡ Ø§Ø±ØªÙØ§Ø¹ ÙƒØ§ÙÙŠ) */
  margin-top: 10px;
}
.add, .edit, .delete{
  font-weight: bold;
  font-size: large;
  margin: 10px;
  padding: 3px 6px;
  text-decoration: none;
  border-radius: 4px;
}
.add, .edit, .delete:hover{
  font-weight: bold;
  font-size: large;
  margin: 10px;
  padding: 3px 6px;
  text-decoration: none;
  border-radius: 4px;
}

.add{
 color: rgb(25, 139, 73); 
 background-color: rgb(202, 221, 206);
}

.edit{
  color: blue;
  background-color: rgb(164, 174, 185);
}

.delete{
  color: red;
  background-color: rgb(194, 177, 177);
}
.add-student{
  margin-bottom:20px; 
  width:70%;
   display: flex;
    justify-content: center;
    gap: 20px;
    height: 50px;  
}
.edit:hover {
   color:white;
  background-color:blue ;
}
.add:hover{
  background-color: rgb(25, 139, 73);
  color: white;
}
.delete:hover{
  background-color: red;
  color: white;
}

</style>
{% endblock %}
